<!doctype html>

<html class="no-js" lang="en">

<head>
	
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="">
	<title>Lame  </title>
	<meta name="description" content="Hack The Box Writeup">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title"
		content="Lame – ">
	<meta name="twitter:description" content="Hack The Box Writeup">
	<meta name="twitter:image:src" content="http://localhost:4000/images/blog/Lame.png">

	<!-- Facebook OpenGraph -->
	<meta property="og:title"
		content="Lame – " />
	<meta property="og:description" content="Hack The Box Writeup" />
	<meta property="og:image" content="http://localhost:4000/images/blog/Lame.png" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Rubik:400,500,700|Ubuntu+Mono:400,700" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">

	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js"
		integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL"
		crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js"
		integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe"
		crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style>
		
	</style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	

</head>


<body class="loading ajax-loading"
	data-site-url="http://localhost:4000" data-page-url="/blog/welcome-post">


	<header class="header--main">

	<div class="wrap grid__2-col">

		
		<a href="/" class="header__title">
			
		</a>
		

		<div class="menu__toggle js-menu-toggle">
			<div class="menu__toggle__icon"><span></span></div>
		</div>

		<nav class="header__menu">
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link button--text">Home</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about-me/" class="menu__list__item__link button--text">About Me</a>
					</li>
					
				</ul>
			</div>
		</nav>
	</div>

</header>



	<div class="loader"><svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg">
			<circle cx="15" cy="15" r="15">
				<animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear"
					repeatCount="indefinite" />
				<animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear"
					repeatCount="indefinite" />
			</circle>
			<circle cx="60" cy="15" r="9" fill-opacity="0.3">
				<animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear"
					repeatCount="indefinite" />
				<animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5"
					calcMode="linear" repeatCount="indefinite" />
			</circle>
			<circle cx="105" cy="15" r="15">
				<animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear"
					repeatCount="indefinite" />
				<animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear"
					repeatCount="indefinite" />
			</circle>
		</svg></div>

	<div class="page-loader"></div>


	<div class="page">
		<div class="page__content"
			data-page-title="Lame – ">
			
			<section class="contact">
  <button class="button--close-modal"></button>

  <div class="wrap">
    <div class="contact__wrap">
      <header class="contact__header">
        <h2 class="title">Get In Touch</h2>
        <p class="subtitle--light">Prefer using email? Say hi at <a
            href="mailto: me@rachelleanne.com">me@rachelleanne.com</a>
        </p>
      </header>

      <form method="POST" action="https://formspree.io/xknvrdpw" class="contact__form">
        <div class="input-group">
          <label for="name">Your Name</label>
          <input type="text" name="name" id="name" placeholder="What should I call you?" />
        </div>

        <div class="input-group">
          <label for="email">Your Email</label>
          <input type="email" name="email" id="email" placeholder="What's your email address?" />
        </div>

        <div class="input-group">
          <label for="message">Your Message</label>
          <textarea name="message" id="message" placeholder="What’s on your mind?" rows="4"></textarea>
        </div>

        <input type="hidden" name="_next" value="/thanks" />
        <input type="hidden" name="_subject" value="Contact from Hi, Im Rachelle" />
        <input type="text" name="_gotcha" style="display: none;" class="contact-form__gotcha" val="">

        <div class="input-submit">
          <input type="submit" class="button--fill" value="Talk Soon">
        </div>
      </form>
    </div>
  </div>
</section>
			
			<div class="page-post">

	<header class="post__header header--single">
		
		<div class="wrap">
			<h1 class="post__title">Lame</h1>
			<time class="post__date label">02 May 2020</time>
		</div>

	</header>

	<section class="post-full">

		<div class="wrap">

			<article class="post__content ">
				<p>Lame was the first box released in Hack The Box (HTB). It's a good box to start with for anyone new to penetration testing since it's a relatively easy and gets you familiar with using Metasploit.</p>

<h2>Hack the box</h2>
<ul>
	<li>Operating System: Linux</li>
	<li>Difficulty: Easy</li>
</ul>

<h2>Information gathering</h2>

<p>As always, let's start with enumeration by using nmap. I like to use:</p>

<p><img src="/images/blog/nmapscan.jpeg" alt="nmap scan" /></p>

<p>It can take a while for the nmap scan to complete, but once it's done, here are the results:</p>

<p><img src="/images/blog/lamenmapscan.jpg" alt="nmap scan" style="width:80%" /></p>

<p>Taking a look at the results, the most interesting ports are port 129 and 445 since they are SMB ports and SMB is a common internet file system that is known to have vulnerabilities. We can also see that they are both currently running <i>Samba smbd 3.X - 4.X</i>, so we can take a look in Metasploit to see if we can find any exploits.</p>

<h2>Threat modelling and vulnerability analysis</h2>

<p>To access Metasploit, we can enter in Terminal:</p>

<p><code>msfconfig</code></p>

<p>It takes a few minutes for Metasploit to open. Once it opens, we can search for an exploit that is related to Samba by using Metasploit's search feature:</p>

<p><code>search samba</code></p>

<p>From the search results, this one looks promising:</p>

<p><img src="/images/blog/lamemetasploit.jpg" alt="nmap scan" /></p>

<p>And based on the description, it says:</p>

<p><i>This module exploits a command execution vulnerability in Samba versions 3.0.20 through 3.0.25rc3 when using the non-default "username map script" configuration option. By specifying a username containing shell meta characters, attackers can execute arbitrary commands. No authentication is needed to exploit this vulnerability since this option is used to map usernames prior to authentication!</i></p>

<p>So let's try using it!</p>

<h2>Exploitation</h2>

<p>To use an exploit, we can type in Metasploit:</p>

<p><code>use exploit/multi/samba/usermap_script</code></p>

<p><img src="/images/blog/lameexploit.jpg" alt="nmap scan" /></p>

<p>Now we need to configure the exploit so we can use it to attack the machine.</p>

<ul>
	<li><code>options</code>: Gives us the visibility on what options we have to configure the exploit.</li>
	<li><code>set rhosts 10.10.10.3</code>: This would be the victim's IP address.</li>
	<li><code>show targets</code>: This is where we select the target's type (e.g. OS) that we're exploiting.</li>
	<li><code>exploit</code>: Running the exploit.</li>
</ul>

<p>That worked! We now have access to the machine.</p>

<p>We can type <code>shell</code> to see if we can gain shell access.</p>

<p><img src="/images/blog/lameshell.jpg" alt="nmap scan" style="width:80%" /></p>

<p>Once we have shell access, we can type in:</p>

<ul>
	<li><code>whoami</code>: Tells us the type of privileges that we have. It looks like we have root access--perfect.</li>
	<li><code>pwd</code>: In other words, print working directory. We can see that we're in the /root folder.</li>
</ul>

<p>Since we have root access, we can locate both the root.txt and user.txt file to win the game. Remember to <code>cat</code> the file once you find it so you can read the contents and enter the flag into HTB.</p>

<p>Congratulations! We now have root access to the box Lame.</p>

			</article>

			<div class="post__more grid">
				
				
			</div>

		</div>

	</section>

</div>

		</div>
	</div>


	<footer class="footer">
	<div class="wrap grid">

	</div>



	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/made-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	


</body>

</html>